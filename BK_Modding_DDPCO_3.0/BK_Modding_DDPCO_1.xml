<?xml version="1.0"?>
<!DOCTYPE modification SYSTEM "http://www.simplemachines.org/xml/modification">
<!-- This package was generated by SleePys Modification Maker at http://sleepycode.com -->
<modification xmlns="http://www.simplemachines.org/xml/modification" xmlns:smf="http://www.simplemachines.org/">
	<id>BK_Modding:Disable_Decrease_Post_Count_Option</id>
	<version>2.0</version>

	<file name="$languagedir/ModSettings.english.php">
		<operation>
			<search position="end" />
			<add><![CDATA[$txt['disablePostDecreasePostCount'] = 'Disable decrease post count when post removed';
$txt['disableTopicDecreasePostCount'] = 'Disable decrease post count when topic removed';]]></add>
		</operation>
	</file>

	<file name="$languagedir/ModSettings.english-utf8.php" error="skip">
		<operation>
			<search position="end" />
			<add><![CDATA[$txt['disablePostDecreasePostCount'] = 'Disable decrease post count when post removed';
$txt['disableTopicDecreasePostCount'] = 'Disable decrease post count when topic removed';]]></add>
		</operation>
	</file>

	<file name="$languagedir/ModSettings.portuguese.php" error="skip">
		<operation>
			<search position="end" />
			<add><![CDATA[$txt['disablePostDecreasePostCount'] = 'Desativar diminuição contagem de poste quando poste e removido';
$txt['disableTopicDecreasePostCount'] = 'Desativar diminuição contagem de poste quando tópico removido';]]></add>
		</operation>
	</file>

	<file name="$languagedir/ModSettings.turkish.php" error="skip">
		<operation>
			<search position="end" />
			<add><![CDATA[$txt['disablePostDecreasePostCount'] = 'Mesaj silindiðinde mesaj sayýsý düþmesin';
$txt['disableTopicDecreasePostCount'] = 'Konu silindiðinde mesaj sayýsý düþmesin';]]></add>
		</operation>
	</file>

	<file name="$sourcedir/ModSettings.php">
		<operation>
			<search position="replace"><![CDATA[			// Reporting of personal messages?
			array('check', 'enableReportPM'),]]></search>
			<add><![CDATA[			// Reporting of personal messages?
			array('check', 'enableReportPM'),
		'',
			// Decrease post count option.
			array('check', 'disablePostDecreasePostCount'),
			array('check', 'disableTopicDecreasePostCount'),
		'',]]></add>
		</operation>
	</file>

	<file name="$sourcedir/RemoveTopic.php">
		<operation>
			<search position="before"><![CDATA[function removeTopics($topics, $decreasePostCount = true, $ignoreRecycling = false)
{
	global $db_prefix, $sourcedir, $modSettings;]]></search>
			<add><![CDATA[	//Disable decrease post count when topic removed check.
	if(isset($modSettings['disableTopicDecreasePostCount']) && $modSettings['disableTopicDecreasePostCount'])
		$decreasePostCount = false;
]]></add>
		</operation>
		<operation>
			<search position="before"><![CDATA[	if (empty($message) || !is_numeric($message))
		return false;
]]></search>
			<add><![CDATA[	//Disable decrease post count when post removed check.
	if(isset($modSettings['disablePostDecreasePostCount']) && $modSettings['disablePostDecreasePostCount'])
		$decreasePostCount = false;
]]></add>
		</operation>
	</file>

</modification>